version: '3.9'

services:
  pdf-generator:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: report-pdf-generator-app
    environment:
      - AWS_ACCESS_KEY_ID="your_access_key_id"
      - AWS_SECRET_ACCESS_KEY="your_secret_access_key"
      - AWS_DEFAULT_REGION="your_aws_region"
      - S3_BUCKET_NAME="your_s3_bucket_name"
      - DYNAMODB_TABLE_NAME="your_dynamodb_table_name"
      - SQS_QUEUE_URL="your_sqs_queue_url"
    volumes:
      # Mount thư mục output để lấy file PDF ra ngoài host
      - ./output:/app/output
    # Nếu bạn muốn chạy một lần rồi thoát (ví dụ test)
    tty: true
    stdin_open: true
    command: python main.py   # thay bằng tên file chính của bạn