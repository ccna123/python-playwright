version: '3.9'

services:
  pdf-generator:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: report-pdf-generator-app
    environment:
      - AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
      - AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
      - AWS_DEFAULT_REGION=${AWS_DEFAULT_REGION}
      - S3_BUCKET_NAME=${AWS_S3_BUCKET_NAME}
      - DYNAMODB_TABLE_NAME=${AWS_DYNAMODB_TABLE_NAME}
      - ENV=${ENV}
    volumes:
      # Mount thư mục output để lấy file PDF ra ngoài host
      - ./output:/app/output
    # Nếu bạn muốn chạy một lần rồi thoát (ví dụ test)
    tty: true
    stdin_open: true
    command: python main.py   # thay bằng tên file chính của bạn